<template>
  <header
    class="w-full h-14 flex items-center justify-between px-4 backdrop-blur-xs inset-x-0 dark:border-white/10 border-b border-b-gray-950/5"
  >
    <div>
      <router-link to="/" class="flex items-center gap-3 cursor-pointer">
        <img src="/ico.svg" width="32" alt="" />
      </router-link>
    </div>
    <div class="flex items-center gap-4">
      <div>
        <div class="relative" @click="showPanel">
          <svg
            class="cursor-pointer"
            t="1749546757267"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            width="22"
            height="22"
            :fill="theme.isDark ? '#ffffff' : '#000000'"
          >
            <path
              d="M710.58 462.01a54.9 54.9 0 1 0 109.8 0 54.9 54.9 0 1 0-109.8 0z m-91.5-146.4a54.9 54.9 0 1 0 109.8 0 54.9 54.9 0 1 0-109.8 0z m-183.002-45.751a54.9 54.9 0 1 0 109.8 0 54.9 54.9 0 1 0-109.8 0z m-164.702 91.5a54.9 54.9 0 1 0 109.8 0 54.9 54.9 0 1 0-109.8 0z m-64.05 164.702a54.9 54.9 0 1 0 109.8 0 54.9 54.9 0 1 0-109.8 0z m273.587 430.97c-19.215 0-39.346-1.83-61.306-4.576l-5.49-0.915C258.566 927.75 152.425 776.774 147.85 770.37c-150.062-228.752-75.031-460.25 66.795-588.35C355.557 53.916 590.714-0.984 796.591 164.632 929.267 271.69 969.527 419.92 971.357 426.325v1.83c19.215 104.311 3.66 181.172-46.665 230.583-76.86 74.115-204.047 50.325-221.432 46.665-23.79-2.745-41.176 4.575-53.986 20.13-13.725 17.385-16.47 40.26-11.895 53.986 12.81 38.43 14.64 67.71 5.49 89.67-26.535 57.646-80.52 87.841-161.956 87.841z m-58.56-60.391l5.49 0.915c88.755 13.725 142.74-3.66 164.7-53.07 0-0.916 4.576-12.81-7.32-49.411-11.894-32.94-2.744-75.946 21.046-105.226 24.705-31.11 61.306-44.836 104.31-40.26l2.746 0.915c0.915 0 114.376 24.705 172.937-32.026 35.685-34.77 46.665-95.16 31.11-179.341-3.66-11.896-43.006-140.912-156.467-231.498-179.341-146.4-385.218-97.905-509.66 14.64C136.87 326.59 52.69 525.147 193.6 740.174c0.915 0 96.991 137.252 228.752 156.467z"
              p-id="6680"
            ></path>
          </svg>

          <div
            class="absolute top-8 right-0 flex flex-col gap-1 bg-white dark:bg-gray-700/50 rounded-xs shadow-xs border border-gray-100 dark:border-gray-500 p-4 z-50"
            v-show="visible"
          >
            <div class="cursor-pointer text-sm flex items-center gap-2" @click="handleTheme()">
              <div class="aspect-square w-4 border border-gray-400"></div>
              <span class="hover:text-gray-500 dark:text-white dark:hover:text-gray-400">默认</span>
            </div>
            <div
              class="cursor-pointer text-sm flex items-center gap-2"
              v-for="(color, name) in themes"
              :key="name"
              @click="handleTheme(name)"
            >
              <div class="aspect-square w-4" :style="{ backgroundColor: color }"></div>
              <span class="hover:text-gray-500 dark:text-white dark:hover:text-gray-400">{{ name }}</span>
            </div>
          </div>
        </div>
      </div>
      <div>
        <div class="cursor-pointer" v-show="theme.mode === 'system'" title="跟随系统" @click="toggleMode">
          <svg width="20" height="20" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
            <path
              :fill="theme.isDark ? '#ffffff' : '#000000'"
              d="M859.392 743.296H162.624A162.816 162.816 0 0 1 0 580.672V162.624C0 73.024 72.96 0 162.624 0h696.768c89.6 0 162.624 73.024 162.624 162.624v418.112c0 89.6-73.024 162.56-162.624 162.56zM162.624 46.528A116.224 116.224 0 0 0 46.464 162.624v418.112c0 64.064 52.096 116.096 116.16 116.096h696.768a116.16 116.16 0 0 0 116.096-116.096V162.624A116.16 116.16 0 0 0 859.392 46.528H162.624zM789.76 836.16H232.256a23.232 23.232 0 0 1 0-46.464h557.504a23.296 23.296 0 0 1 0 46.464z"
            />
            <path
              :fill="theme.isDark ? '#ffffff' : '#000000'"
              d="M510.976 836.16a23.232 23.232 0 0 1-23.232-23.168v-92.864a23.296 23.296 0 1 1 46.464 0v92.864a23.168 23.168 0 0 1-23.232 23.168z"
            />
          </svg>
        </div>
        <div class="cursor-pointer" v-show="theme.mode === 'light'" title="亮色模式" @click="toggleMode">
          <svg
            class="icon"
            width="20"
            height="20"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill="#000000"
              d="M512 200A312 312 0 1 0 824 512 312 312 0 0 0 512 200z m0 549.333333A237.333333 237.333333 0 1 1 749.333333 512 237.6 237.6 0 0 1 512 749.333333zM474.666667 44.32m5.333333 0l64 0q5.333333 0 5.333333 5.333333l0 102.24q0 5.333333-5.333333 5.333334l-64 0q-5.333333 0-5.333333-5.333334l0-102.24q0-5.333333 5.333333-5.333333ZM154.935877 207.647092m3.771237-3.771236l45.254833-45.254834q3.771236-3.771236 7.542473 0l72.294597 72.294597q3.771236 3.771236 0 7.542473l-45.254834 45.254834q-3.771236 3.771236-7.542472 0l-72.294597-72.294598q-3.771236-3.771236 0-7.542472ZM44.426667 474.613333m5.333333 0l102.24 0q5.333333 0 5.333333 5.333334l0 64q0 5.333333-5.333333 5.333333l-102.24 0q-5.333333 0-5.333333-5.333333l0-64q0-5.333333 5.333333-5.333334ZM155.058812 816.193176m3.771236-3.771236l72.294597-72.294598q3.771236-3.771236 7.542473 0l45.254834 45.254834q3.771236 3.771236 0 7.542473l-72.294597 72.294597q-3.771236 3.771236-7.542473 0l-45.254834-45.254834q-3.771236-3.771236 0-7.542472ZM474.773333 866.613333m5.333334 0l64 0q5.333333 0 5.333333 5.333334l0 102.24q0 5.333333-5.333333 5.333333l-64 0q-5.333333 0-5.333334-5.333333l0-102.24q0-5.333333 5.333334-5.333334ZM736.508185 789.084994m3.771236-3.771236l45.254834-45.254834q3.771236-3.771236 7.542472 0l72.294597 72.294597q3.771236 3.771236 0 7.542473l-45.254834 45.254834q-3.771236 3.771236-7.542472 0l-72.294597-72.294598q-3.771236-3.771236 0-7.542472ZM866.773333 474.506667m5.333334 0l102.24 0q5.333333 0 5.333333 5.333333l0 64q0 5.333333-5.333333 5.333333l-102.24 0q-5.333333 0-5.333334-5.333333l0-64q0-5.333333 5.333334-5.333333ZM736.439877 234.62232m3.771237-3.771237l72.294597-72.294597q3.771236-3.771236 7.542472 0l45.254834 45.254834q3.771236 3.771236 0 7.542472l-72.294597 72.294598q-3.771236 3.771236-7.542473 0l-45.254833-45.254834q-3.771236-3.771236 0-7.542473Z"
            />
          </svg>
        </div>
        <div class="cursor-pointer" v-show="theme.mode === 'dark'" title="暗色模式" @click="toggleMode">
          <svg
            class="icon"
            width="20"
            height="20"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill="#ffffff"
              d="M676.64 72.373333a21.333333 21.333333 0 0 0-28.426667 24.96c7.733333 32 17.333333 77.973333 17.333334 108.64a407.36 407.36 0 0 1-585.173334 366.4 21.333333 21.333333 0 0 0-30.293333 23.04 469.333333 469.333333 0 0 0 485.333333 385.333334c243.84-11.84 439.413333-212.16 445.76-456.213334a469.333333 469.333333 0 0 0-304.533333-452.16zM512 906.666667a395.306667 395.306667 0 0 1-357.333333-226.4 2.186667 2.186667 0 0 1 2.453333-3.04 480 480 0 0 0 100.96 10.666666 482.506667 482.506667 0 0 0 481.92-481.92v-11.68a2.186667 2.186667 0 0 1 3.466667-1.813333 395.52 395.52 0 0 1 81.44 78.986667A390.826667 390.826667 0 0 1 906.666667 512a395.146667 395.146667 0 0 1-394.666667 394.666667zM202.293333 262.72a8.96 8.96 0 0 0 2.88 0.426667 75.946667 75.946667 0 0 1 75.733334 75.733333 7.626667 7.626667 0 0 0 0.48 2.88 11.52 11.52 0 0 0 22.186666 0 8.746667 8.746667 0 0 0 0.426667-2.88 76 76 0 0 1 75.733333-75.733333 8.746667 8.746667 0 0 0 2.88-0.426667 11.573333 11.573333 0 0 0 0-22.24 8.746667 8.746667 0 0 0-2.88-0.426667A75.946667 75.946667 0 0 1 304 164.32a8.746667 8.746667 0 0 0-0.426667-2.88 11.52 11.52 0 0 0-22.186666 0 7.626667 7.626667 0 0 0-0.48 2.88A75.893333 75.893333 0 0 1 205.386667 240a8.96 8.96 0 0 0-2.88 0.426667 11.573333 11.573333 0 0 0 0 22.24z"
            />
          </svg>
        </div>
      </div>
    </div>
  </header>
</template>

<script setup>
import { themeColors } from "@/hooks/useTheme.js";

const theme = inject("theme");
const toggleMode = inject("toggleMode");
const changeColor = inject("changeColor");

const visible = ref(false);

const themes = readonly(themeColors);

function showPanel() {
  visible.value = !visible.value;
}

function handleTheme(name) {
  changeColor(name);
}
</script>
