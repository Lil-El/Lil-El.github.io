import{r,w as F,l as b,n as k,z as B,U as V,A as x,B as _,Q as z,u,I as E,J as R,D as I,E as L,C as N,R as T,T as U,W as $,v as C}from"./vue-75FSKuI8.js";import{q as A}from"./@lil-el/ui-p6zqSHYg.js";import{s as D}from"./_plugin-vue_export-helper-9uN0dvLo.js";const H=["src"],M={__name:"select",props:{type:String,icon:String,popup:String,modelValue:[String,Number,Boolean]},emits:["update:modelValue","change"],setup(l,{emit:S}){const d=l,m=S,e=r(!1),w=r(null),g=r(null),o=r(0),i=r(0);C("getCurrent",()=>d.modelValue),C("onUpdate",t=>{m("update:modelValue",t),m("change",t)}),F(e,()=>{e.value&&p()}),b(()=>{window.addEventListener("resize",p),window._currentSelectComponentFlag||(window._currentSelectComponentFlag=e,document.body.addEventListener("click",t=>{window._currentSelectComponentFlag.value&&(window._currentSelectComponentFlag.value=!1)}))});function y(){window._currentSelectComponentFlag!==e&&window._currentSelectComponentFlag.value&&(window._currentSelectComponentFlag.value=!1),e.value=!e.value,e.value&&(window._currentSelectComponentFlag=e)}function p(){e.value&&k(()=>{var t,v;const f=document.body.clientWidth,h=document.body.clientHeight,n=(t=w.value)==null?void 0:t.getBoundingClientRect(),a=(v=g.value)==null?void 0:v.getBoundingClientRect();if(d.popup==="bottom"){const s=n.left+n.width/2-a.width/2,c=n.bottom+4;s+a.width>f?(o.value=f-a.width-4,i.value=c):(o.value=s,i.value=c)}else if(d.popup==="right"){const s=n.right+4,c=n.top+n.height/2-a.height/2;c+a.height>h?(o.value=s,i.value=h-a.height-4):(o.value=s,i.value=c)}})}return V(()=>{window.removeEventListener("resize",p)}),(t,v)=>(x(),B("div",{class:"select",ref_key:"selectRef",ref:w,onClick:$(y,["stop"])},[_("img",{src:u(A)(l.icon),alt:""},null,8,H),z(U,{"enter-active-class":`select-animate-${l.popup}__enter`,"leave-active-class":`select-animate-${l.popup}__leave`},{default:E(()=>[R(_("div",{class:L(["select__options",{cell:l.type==="cell",list:l.type==="list"}]),ref_key:"optionsRef",ref:g,style:I({left:u(o)+"px",top:u(i)+"px"})},[N(t.$slots,"default",{},void 0,!0)],6),[[T,u(e)]])]),_:3},8,["enter-active-class","leave-active-class"])],512))}},Q=D(M,[["__scopeId","data-v-b2d45ac2"]]);export{Q as default};
