import{r,w as b,o as k,n as F,c as B,a as V,b as x,d as _,e as z,u,q as E,f as R,g as L,h as N,i as T,j as $,v as H,T as I,k as M,p as S}from"./index-Csrm1RtS.js";import{s as U}from"./_plugin-vue_export-helper-9uN0dvLo.js";const j=["src"],q={__name:"select",props:{type:String,icon:String,popup:String,modelValue:[String,Number,Boolean]},emits:["update:modelValue","change"],setup(l,{emit:C}){const d=l,m=C,e=r(!1),w=r(null),g=r(null),o=r(0),i=r(0);S("getCurrent",()=>d.modelValue),S("onUpdate",t=>{m("update:modelValue",t),m("change",t)}),b(e,()=>{e.value&&p()}),k(()=>{window.addEventListener("resize",p),window._currentSelectComponentFlag||(window._currentSelectComponentFlag=e,document.body.addEventListener("click",t=>{window._currentSelectComponentFlag.value&&(window._currentSelectComponentFlag.value=!1)}))});function y(){window._currentSelectComponentFlag!==e&&window._currentSelectComponentFlag.value&&(window._currentSelectComponentFlag.value=!1),e.value=!e.value,e.value&&(window._currentSelectComponentFlag=e)}function p(){e.value&&F(()=>{var t,v;const f=document.body.clientWidth,h=document.body.clientHeight,n=(t=w.value)==null?void 0:t.getBoundingClientRect(),a=(v=g.value)==null?void 0:v.getBoundingClientRect();if(d.popup==="bottom"){const s=n.left+n.width/2-a.width/2,c=n.bottom+4;s+a.width>f?(o.value=f-a.width-4,i.value=c):(o.value=s,i.value=c)}else if(d.popup==="right"){const s=n.right+4,c=n.top+n.height/2-a.height/2;c+a.height>h?(o.value=s,i.value=h-a.height-4):(o.value=s,i.value=c)}})}return V(()=>{window.removeEventListener("resize",p)}),(t,v)=>(x(),B("div",{class:"select",ref_key:"selectRef",ref:w,onClick:M(y,["stop"])},[_("img",{src:u(E)(l.icon),alt:""},null,8,j),z(I,{"enter-active-class":`select-animate-${l.popup}__enter`,"leave-active-class":`select-animate-${l.popup}__leave`},{default:R(()=>[L(_("div",{class:T(["select__options",{cell:l.type==="cell",list:l.type==="list"}]),ref_key:"optionsRef",ref:g,style:N({left:u(o)+"px",top:u(i)+"px"})},[$(t.$slots,"default",{},void 0,!0)],6),[[H,u(e)]])]),_:3},8,["enter-active-class","leave-active-class"])],512))}},W=U(q,[["__scopeId","data-v-b2d45ac2"]]);export{W as default};
