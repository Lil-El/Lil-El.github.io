import{r as u,v as b,o as x,x as y,c as F,s as k,d as z,a as _,g as B,u as V,w as E,K as L,j as R,n as T,B as N,L as U,T as $,S as j,D as S}from"./index-DkH2bU3z.js";import{q as D}from"./code-pen-2OiQGWRY-CIgEQvq--wW9pOJAv.js";const M=(t,p)=>{const n=t.__vccOpts||t;for(const[d,e]of p)n[d]=e;return n},O=["src"],q={__name:"select",props:{type:String,icon:String,popup:String,modelValue:[String,Number,Boolean]},emits:["update:modelValue","change"],setup(t,{emit:p}){const n=t,d=p,e=u(!1),f=u(null),g=u(null),s=u(0),i=u(0);S("getCurrent",()=>n.modelValue),S("onUpdate",o=>{d("update:modelValue",o),d("change",o)}),b(e,()=>{e.value&&v()}),x(()=>{window.addEventListener("resize",v),window._currentSelectComponentFlag||(window._currentSelectComponentFlag=e,document.body.addEventListener("click",o=>{window._currentSelectComponentFlag.value&&(window._currentSelectComponentFlag.value=!1)}))});function C(){window._currentSelectComponentFlag!==e&&window._currentSelectComponentFlag.value&&(window._currentSelectComponentFlag.value=!1),e.value=!e.value,e.value&&(window._currentSelectComponentFlag=e)}function v(){e.value&&y(()=>{var o,m;const w=document.body.clientWidth,h=document.body.clientHeight,l=(o=f.value)==null?void 0:o.getBoundingClientRect(),a=(m=g.value)==null?void 0:m.getBoundingClientRect();if(n.popup==="bottom"){const r=l.left+l.width/2-a.width/2,c=l.bottom+4;r+a.width>w?(s.value=w-a.width-4,i.value=c):(s.value=r,i.value=c)}else if(n.popup==="right"){const r=l.right+4,c=l.top+l.height/2-a.height/2;c+a.height>h?(s.value=r,i.value=h-a.height-4):(s.value=r,i.value=c)}})}return k(()=>{window.removeEventListener("resize",v)}),(o,m)=>(z(),F("div",{class:"select flex justify-center items-center size-9 cursor-pointer hover:rounded-sm hover:bg-[#ffffff1f]",ref_key:"selectRef",ref:f,onClick:j(C,["stop"])},[_("img",{src:V(D)(t.icon),alt:""},null,8,O),B($,{"enter-active-class":`select-animate-${t.popup}__enter`,"leave-active-class":`select-animate-${t.popup}__leave`},{default:E(()=>[L(_("div",{class:T(["select__options absolute flex top-14 p-1.5 rounded-sm bg-[#555] z-10 text-sm border border-gray-500",[t.type==="cell"?"cell items-center gap-2":"list size-max flex-col gap-1"]]),ref_key:"optionsRef",ref:g,style:R({left:s.value+"px",top:i.value+"px"})},[N(o.$slots,"default",{},void 0,!0)],6),[[U,e.value]])]),_:3},8,["enter-active-class","leave-active-class"])],512))}},I=M(q,[["__scopeId","data-v-2b8b97dd"]]);export{I as default};
